<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Admin Panel</title>
    <link rel="stylesheet" href="~/css/modal.css" />
    <link rel="stylesheet" href="~/css/dashboard.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- Sidebar for navigation -->
    <div class="sidebar">
        <div class="logo-details">
            <!-- Icon and logo name -->
            <i class="bx bxl-c-plus-plus icon"></i>
            <a asp-controller="Home" asp-action="Index">
                <div class="logo_name">Symphony</div>
            </a>
            <i class="bx bx-menu" id="btn"></i>
            <!-- Menu button to toggle sidebar -->
        </div>
        <ul class="nav_list">
            <!-- List of navigation items -->
            <li>
                <a asp-controller="Auth" asp-action="Dashboard">
                    <i class="bx bx-grid-alt"></i>
                    <span class="links_name">Dashboard</span>
                </a>
                <span class="tooltip">Dashboard</span>
            </li>
            <li class="drop">
                <a href="#" class="dropdown-tog">
                    <i class="bx bx-user"></i>
                    <span class="links_name">Students</span>
                    <i class="bx bx-chevron-down arrow links_name"></i>
                </a>
                <span class="tooltip">Students</span>
                <ul class="sub_menu">
                    <li><a asp-controller="Student" asp-action="Index"><span class="links_name">Manage Students</span></a></li>
                    <li><a asp-controller="Exam" asp-action="Index"><span class="links_name">Exams</span></a></li>
                    <li><a asp-controller="Result" asp-action="Create"><span class="links_name">Results</span></a></li>
                </ul>
            </li>
            <li class="drop">
                <a href="#" class="dropdown-tog">
                    <i class="bx bx-user"></i>
                    <span class="links_name">Staff</span>
                    <i class="bx bx-chevron-down arrow links_name"></i>
                </a>
                <span class="tooltip">Staff</span>
                <ul class="sub_menu">
                    <li><a asp-controller="Student" asp-action="Index"><span class="links_name">Teacher</span></a></li>
                    <li><a asp-controller="Student" asp-action="Index"><span class="links_name">Batches</span></a></li>
                </ul>
            </li>
            <li class="drop">
                <a href="#" class="dropdown-tog">
                    <i class="bx bx-user"></i>
                    <span class="links_name">Financial</span>
                    <i class="bx bx-chevron-down arrow links_name"></i>
                </a>
                <span class="tooltip">Financial</span>
                <ul class="sub_menu">
                    <li><a asp-controller="Student" asp-action="Index"><span class="links_name">Enrollment</span></a></li>
                    <li><a asp-controller="Student" asp-action="Index"><span class="links_name">Payment</span></a></li>
                </ul>
            </li>
            <li>
                <a asp-controller="Student" asp-action="Index">
                    <i class="bx bx-folder"></i>
                    <span class="links_name">Courses</span>
                </a>
                <span class="tooltip">Courses</span>
            </li>
            <li>
                <a asp-controller="About" asp-action="Index">
                    <i class="bx bx-pie-chart-alt-2"></i>
                    <span class="links_name">About</span>
                </a>
                <span class="tooltip">About</span>
            </li>
            <li>
                <a asp-controller="FAQ" asp-action="Index">
                    <i class="bx bx-folder"></i>
                    <span class="links_name">FAQ's</span>
                </a>
                <span class="tooltip">FAQ's</span>
            </li>
            <li>
                <a asp-controller="Contact" asp-action="Index">
                    <i class="bx bx-cart-alt"></i>
                    <span class="links_name">Contact Info</span>
                </a>
                <span class="tooltip">Contact</span>
            </li>
            <li>
                <a asp-controller="Auth" asp-action="Profile">
                    <i class="bx bx-cog"></i>
                    <span class="links_name">Setting</span>
                </a>
                <span class="tooltip">Setting</span>
            </li>
        </ul>
    </div>
    <!-- Main content area -->
        <div class="navbar">
            <div class="logo"></div>
            <div class="user-menu" id="userMenu">
                @if (User.Identity.IsAuthenticated)
                {
                    var fullName = User.Claims.Where(x => x.Type == System.Security.Claims.ClaimTypes.Name).Select(x => x.Value).FirstOrDefault();
                    <span class="username">
                        @fullName
                    </span>
                }
                else
                {
                    <span class="username">
                        User
                    </span>
                }
                <div class="dropdown" id="dropdownMenu">
                    <a href="">Messages</a>
                    <a asp-controller="Auth" asp-action="Logout">Logout</a>
                </div>
            </div>
        </div>

        @RenderBody()

        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
        <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script>
            $(document).ready(function () {
              $("#userMenu").click(function (e) {
                e.stopPropagation();
                $("#dropdownMenu").toggleClass("active");
              });

              $(document).click(function () {
                $("#dropdownMenu").removeClass("active");
              });
            });

            // Get the sidebar, close button
            let sidebar = document.querySelector(".sidebar");
            let closeBtn = document.querySelector("#btn");
            let navList = document.querySelector(".nav-list");

            // Event listener for the menu button to toggle the sidebar
            closeBtn.addEventListener("click", () => {
              sidebar.classList.toggle("open");
              navList.classList.toggle("scroll");
              menuBtnChange();
            });
                        document.querySelectorAll('.dropdown-tog').forEach(toggle => {
                toggle.addEventListener('click', e => {
                    e.preventDefault();
                    const parent = toggle.parentElement;
                    const subMenu = parent.querySelector('.sub_menu');
                    parent.classList.toggle('open');
                    subMenu.classList.toggle('show');
                });
            });

            // Function to change the menu button icon
            function menuBtnChange() {
              if (sidebar.classList.contains("open")) {
                closeBtn.classList.replace("bx-menu", "bx-menu-alt-right"); // Change icon to indicate closing
              } else {
                closeBtn.classList.replace("bx-menu-alt-right", "bx-menu"); // Change icon to indicate opening
              }
            }

        </script>
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
        @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
